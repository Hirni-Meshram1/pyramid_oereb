<%page args="public_law_restriction"/>
<%
    # PLR without legal provision is allowed in reduced extract only!
    if params.flavour != 'reduced' and isinstance(public_law_restriction.documents, list) and \
                    len(public_law_restriction.documents) == 0:
        raise ValueError('Restrictions on landownership without legal provision are only allowed '
                         'in reduced extracts!')
%>
<xsd:RestrictionOnLandownership>
    <xsd:Information>
        <%include file="localized_text.xml" args="text=public_law_restriction.content"/>
    </xsd:Information>
    <%include file="theme.xml" args="theme=public_law_restriction.theme"/>
    %if public_law_restriction.subtopic:
    <xsd:SubTheme>${public_law_restriction.subtopic}</xsd:SubTheme>
    %endif
    %if public_law_restriction.type_code:
    <xsd:TypeCode>${public_law_restriction.type_code}</xsd:TypeCode>
    %endif
    %if public_law_restriction.type_code_list:
    <xsd:TypeCodelist>${public_law_restriction.type_code_list}</xsd:TypeCodelist>
    %endif
    %if public_law_restriction.legal_state:
    ## TODO: solve code here, where may it come from?
    <xsd:Lawstatus>${public_law_restriction.legal_state}</xsd:Lawstatus>
    %endif
    %if public_law_restriction.area:
    <xsd:Area>${public_law_restriction.area}</xsd:Area>
    <xsd:AreaUnit>${public_law_restriction.area_unit}</xsd:AreaUnit>
    %endif
    %if public_law_restriction.part_in_percent:
    <xsd:PartInPercent>${public_law_restriction.part_in_percent}</xsd:PartInPercent>
    %endif
    %if public_law_restriction.length:
    <xsd:Length>${public_law_restriction.length}</xsd:Length>
    <xsd:LengthUnit>${public_law_restriction.length_unit}</xsd:LengthUnit>
    %endif
    %if params.images:
    <xsd:Symbol>TODO: deliver binary content to Symbol here...</xsd:Symbol>
    %else:
    <xsd:SymbolRef>TODO: deliver ULR to Symbol here...</xsd:SymbolRef>
    %endif
    %for geometry in public_law_restriction.geometries:
    <%include file="geometry.xml" args="geometry=geometry"/>
    %endfor
    <xsd:Map>
        <%include file="view_service.xml" args="map=public_law_restriction.view_service"/>
    </xsd:Map>
    %for document in public_law_restriction.documents:
    <xsd:LegalProvisions>
        <%include file="document.xml" args="document=document"/>
    </xsd:LegalProvisions>
    %endfor
    <xsd:ResponsibleOffice>
        <%include file="office.xml" args="office=public_law_restriction.responsible_office"/>
    </xsd:ResponsibleOffice>
</xsd:RestrictionOnLandownership>